:PROPERTIES:
:title: readwise/18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ
:END:

:PROPERTIES:
:author: [[geekbang.org]]
:full-title: "18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ"
:category: [[articles]]
:url: https://time.geekbang.org/column/article/101288
:tags:[[gt/pythonæ ¸å¿ƒæŠ€æœ¯ä¸å®æˆ˜]],
:image-url: https://static001.geekbang.org/resource/image/11/c3/110770f3c6a193ebdac124ca171a73c3.jpg
:END:

* Highlights first synced by [[Readwise]] [[2023-12-18]]
** ğŸ“Œ
#+BEGIN_QUOTE
äº‹å®ä¸Šï¼Œmeta-class çš„ meta è¿™ä¸ªè¯æ ¹ï¼Œèµ·æºäºå¸Œè…Šè¯­è¯æ±‡ metaï¼ŒåŒ…å«ä¸‹é¢ä¸¤ç§æ„æ€ï¼š

â€œBeyondâ€ï¼Œä¾‹å¦‚æŠ€æœ¯è¯æ±‡ metadataï¼Œæ„æ€æ˜¯æè¿°æ•°æ®çš„è¶…è¶Šæ•°æ®ï¼›

â€œChangeâ€ï¼Œä¾‹å¦‚æŠ€æœ¯è¯æ±‡ metamorphosisï¼Œæ„æ€æ˜¯æ”¹å˜çš„å½¢æ€ã€‚ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t1y284k6e42kkfn3z4cvwm)
** ğŸ“Œ
#+BEGIN_QUOTE
metaclassï¼Œä¸€å¦‚å…¶åï¼Œå®é™…ä¸ŠåŒæ—¶åŒ…å«äº†â€œè¶…è¶Šç±»â€å’Œâ€œå˜å½¢ç±»â€çš„å«ä¹‰ï¼Œå®Œå…¨ä¸æ˜¯â€œåŸºæœ¬ç±»â€çš„æ„æ€ã€‚æ‰€ä»¥ï¼Œè¦æ·±å…¥ç†è§£ metaclassï¼Œæˆ‘ä»¬å°±è¦å›´ç»•å®ƒçš„è¶…è¶Šå˜å½¢ç‰¹æ€§ã€‚ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t1yd3pzspqmg5dm90wyxgb)
** ğŸ“Œ
#+BEGIN_QUOTE
å¯¹äº YAML çš„ä½¿ç”¨è€…ï¼Œè¿™ä¸€ç‚¹ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œä½ åªè¦ç®€å•åœ°ç»§æ‰¿ yaml.YAMLObjectï¼Œå°±èƒ½è®©ä½ çš„ Python Object å…·æœ‰åºåˆ—åŒ–å’Œé€†åºåˆ—åŒ–èƒ½åŠ›ã€‚æ˜¯ä¸æ˜¯ç›¸æ¯”æ™®é€š Python ç±»ï¼Œæœ‰ä¸€ç‚¹â€œå˜æ€â€ï¼Œæœ‰ä¸€ç‚¹â€œè¶…è¶Šâ€ï¼Ÿ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t233s1h2pehyr0ek40p78y)
** ğŸ“Œ
#+BEGIN_QUOTE
å› ä¸ºç¯‡å¹…åŸå› ï¼Œæˆ‘ä»¬è¿™é‡Œåªçœ‹ YAMLObject çš„ load() åŠŸèƒ½ã€‚ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…¨å±€çš„æ³¨å†Œå™¨ï¼Œè®© YAML çŸ¥é“ï¼Œåºåˆ—åŒ–æ–‡æœ¬ä¸­çš„ !Monster éœ€è¦è½½å…¥æˆ Monster è¿™ä¸ª Python ç±»å‹ã€‚ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t21z0gkrt64d8jj994r8jp)
** ğŸ“Œ
#+BEGIN_QUOTE
è¿™ä¸€ç‚¹ã€‚

é‚£ä¹ˆï¼Œæ›´ä¼˜çš„å®ç°æ–¹å¼æ˜¯ä»€ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t2jbz3zrsh62mtzvk4549v)
** ğŸ“Œ
#+BEGIN_QUOTE
# Python 2/3 ç›¸åŒéƒ¨åˆ†

class YAMLObjectMetaclass(type):

def __init__(cls, name, bases, kwds):

super(YAMLObjectMetaclass, cls).__init__(name, bases, kwds)

if 'yaml_tag' in kwds and kwds['yaml_tag'] is not None:

cls.yaml_loader.add_constructor(cls.yaml_tag, cls.from_yaml)

# çœç•¥å…¶ä½™å®šä¹‰ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t28fhwxeytj2bvye1z2h5j)
** ğŸ“Œ
#+BEGIN_QUOTE
Python 2/3 ç›¸åŒéƒ¨åˆ†

class YAMLObjectMetaclass(type):

def __init__(cls, name, bases, kwds):

super(YAMLObjectMetaclass, cls).__init__(name, bases, kwds)

if 'yaml_tag' in kwds and kwds['yaml_tag'] is not None:

cls.yaml_loader.add_constructor(cls.yaml_tag, cls.from_yaml)

# çœç•¥å…¶ä½™å®šä¹‰ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t255gztd7bp8zrgqfadpf1)
** ğŸ“Œ
#+BEGIN_QUOTE
# Python 3

class YAMLObject(metaclass=YAMLObjectMetaclass):

yaml_loader = Loader

# çœç•¥å…¶ä½™å®šä¹‰ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t258epxk703e2jg4z2t6h5)
** ğŸ“Œ
#+BEGIN_QUOTE
# Python 3

class YAMLObject(metaclass=YAMLObjectMetaclass):

yaml_loader = Loader

# çœç•¥å…¶ä½™å®šä¹‰ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t28mgqemr00vsa4y43qqwy)
** ğŸ“Œ
#+BEGIN_QUOTE
åœ¨ YAMLObjectMetaclass ä¸­ï¼Œ ä¸‹é¢è¿™è¡Œä»£ç å°±æ˜¯é­”æ³•å‘ç”Ÿçš„åœ°æ–¹ï¼š

cls.yaml_loader.add_constructor(cls.yaml_tag, cls.from_yaml) 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t29qv4a5wex3aq5byhsw3t)
** ğŸ“Œ
#+BEGIN_QUOTE
YAML åº”ç”¨ metaclassï¼Œæ‹¦æˆªäº†æ‰€æœ‰ YAMLObject å­ç±»çš„å®šä¹‰ã€‚ä¹Ÿå°±è¯´è¯´ï¼Œåœ¨ä½ å®šä¹‰ä»»ä½• YAMLObject å­ç±»æ—¶ï¼ŒPython ä¼šå¼ºè¡Œæ’å…¥è¿è¡Œä¸‹é¢è¿™æ®µä»£ç ï¼ŒæŠŠæˆ‘ä»¬ä¹‹å‰æƒ³è¦çš„add_constructor(Foo)ç»™è‡ªåŠ¨åŠ ä¸Šã€‚ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t2at3qsrcr1wr8gz91psb2)
** ğŸ“Œ
#+BEGIN_QUOTE
ç¬¬ä¸€ï¼Œæ‰€æœ‰çš„ Python çš„ç”¨æˆ·å®šä¹‰ç±»ï¼Œéƒ½æ˜¯ type è¿™ä¸ªç±»çš„å®ä¾‹ã€‚ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t2cwapt0pq92205hehtn8a)
** ğŸ“Œ
#+BEGIN_QUOTE
ç¬¬äºŒï¼Œç”¨æˆ·è‡ªå®šä¹‰ç±»ï¼Œåªä¸è¿‡æ˜¯ type ç±»çš„__call__è¿ç®—ç¬¦é‡è½½ã€‚ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t2dprhz01jjrp77xvnrq09)
** ğŸ“Œ
#+BEGIN_QUOTE
å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç±»çš„è¯­å¥ç»“æŸæ—¶ï¼ŒçœŸæ­£å‘ç”Ÿçš„æƒ…å†µï¼Œæ˜¯ Python è°ƒç”¨ type çš„__call__è¿ç®—ç¬¦ã€‚ç®€å•æ¥è¯´ï¼Œå½“ä½ å®šä¹‰ä¸€ä¸ªç±»æ—¶ï¼Œå†™æˆä¸‹é¢è¿™æ ·æ—¶ï¼š 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t2dx698sa4vn8ngzks56q0)
** ğŸ“Œ
#+BEGIN_QUOTE
ç¬¬ä¸‰ï¼Œmetaclass æ˜¯ type çš„å­ç±»ï¼Œé€šè¿‡æ›¿æ¢ type çš„__call__è¿ç®—ç¬¦é‡è½½æœºåˆ¶ï¼Œâ€œè¶…è¶Šå˜å½¢â€æ­£å¸¸çš„ç±»ã€‚ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t2evkxma4y2p97yervxq1n)
** ğŸ“Œ
#+BEGIN_QUOTE
ä¸€æ—¦ä½ æŠŠä¸€ä¸ªç±»å‹ MyClass çš„ metaclass è®¾ç½®æˆ MyMetaï¼ŒMyClass å°±ä¸å†ç”±åŸç”Ÿçš„ type åˆ›å»ºï¼Œè€Œæ˜¯ä¼šè°ƒç”¨ MyMeta çš„__call__è¿ç®—ç¬¦é‡è½½ã€‚ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t2ffx6gnqrdvrpqag2f638)
** ğŸ“Œ
#+BEGIN_QUOTE
æ‰€ä»¥ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨ä¸Šé¢ YAML çš„ä¾‹å­ä¸­ï¼Œåˆ©ç”¨ YAMLObjectMetaclass çš„__init__æ–¹æ³•ï¼Œä¸ºæ‰€æœ‰ YAMLObject å­ç±»å·å·æ‰§è¡Œadd_constructor()ã€‚ 
#+END_QUOTE
    date:: [[2023-07-21]]
*** from _18 | Metaclassï¼Œæ˜¯æ½˜å¤šæ‹‰é­”ç›’è¿˜æ˜¯é˜¿æ‹‰ä¸ç¥ç¯ï¼Ÿ_ by geekbang.org
*** [View Highlight](https://read.readwise.io/read/01h5t2fzhb3gjd0pb0q9ckgfqv)