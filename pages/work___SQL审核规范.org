* SQL审核规范

** 1. 代码中SQL审核规范


- 代码中包含create、drop、grant、truncate关键字时禁止上线
- 查询语句如包含group by关键字则分组语句后面的列必须为索引列
- 查询语句禁止在where中对表字段使用SQL函数表达式，例如截取、拆分、拼接字符串、时间格式化等函数
- 多数查询语句应携带分页语句，如没有需联系开发人员进行确认
- 禁止使用SQL语句对大表（记录超过100万）实现统计功能
- 更新语句更新单条记录时要添加 limit 1 （仅Mysql）
- 没有分批处理的SQL集合禁止上线

** 2. 手动执行SQL语句审核规范


- 创建表语句需符合[[http://git.webtrn.cn/products/whaty-java/blob/master/java-style.md][MySQL规约]]
- 非空数据库表进行表结构变更时需夜间执行（23：00-6：00）
- mysql更新单条语句时需在语句末尾添加" limit 1 "
- 批量执行SQL语句时需按更新量分批执行（推荐500条记录为一批）
- 单次删除超过1000条数据时需项目经理与审核人一起回复方可执行
